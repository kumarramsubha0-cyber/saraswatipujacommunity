<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Saraswati Puja App</title>

<style>
*{box-sizing:border-box;font-family:Segoe UI,sans-serif}
body{margin:0;background:#000;display:flex;justify-content:center}
.phone{
 width:390px;height:780px;
 background:linear-gradient(180deg,#f7d87c,#fff6d5);
 border-radius:40px;overflow:hidden;position:relative;
 box-shadow:0 0 40px rgba(0,0,0,.7)
}
header{text-align:center;padding:16px}
h1{margin:0;color:#7b3f00;animation:glow 2s infinite alternate}
@keyframes glow{from{text-shadow:0 0 5px #fff}to{text-shadow:0 0 15px gold}}

.screen{height:640px;padding:10px}
.page{display:none;height:100%;overflow:auto}
.page.active{display:block}

.apps{display:grid;grid-template-columns:repeat(2,1fr);gap:20px;margin-top:25px}
.app{
 background:#fff;border-radius:25px;padding:18px;text-align:center;
 box-shadow:0 10px 25px rgba(0,0,0,.25);cursor:pointer
}
.icon{
 width:60px;height:60px;margin:auto;border-radius:50%;
 background:linear-gradient(145deg,#ff9800,#ff5722);
 display:flex;align-items:center;justify-content:center;
 font-size:26px;color:#fff
}
.back{font-weight:bold;color:#7b3f00;cursor:pointer}

input{
 width:100%;padding:12px;margin:10px 0;border-radius:12px;
 border:1px solid #ccc;font-size:16px
}
button{
 width:100%;padding:14px;border:none;border-radius:14px;
 background:linear-gradient(145deg,#ff9800,#ff5722);
 color:#fff;font-size:17px;cursor:pointer
}

.receipt{
 background:#fff;padding:16px;border-radius:14px;
 margin-top:12px;box-shadow:0 6px 15px rgba(0,0,0,.2);
 position:relative
}

/* VERIFIED STAMP */
.verifiedStamp{
 position:absolute;
 top:8px;
 right:8px;
 padding:6px 12px;
 border:2px solid green;
 color:green;
 font-weight:bold;
 border-radius:8px;
 transform:rotate(-10deg);
 animation:stampPop .8s ease-out;
}
@keyframes stampPop{
 from{transform:scale(2) rotate(-20deg);opacity:0}
 to{transform:scale(1) rotate(-10deg);opacity:1}
}

.qrnote{font-size:13px;color:#444;margin-top:6px}

.bottom{
 position:absolute;bottom:0;left:0;right:0;height:60px;background:#fff;
 display:flex;justify-content:space-around;align-items:center;
 box-shadow:0 -4px 15px rgba(0,0,0,.2)
}
.bottom div{cursor:pointer;font-size:13px;text-align:center}
</style>
</head>

<body>
<div class="phone">

<header>
<h1>ğŸ™ Saraswati Puja ğŸ™</h1>
</header>

<div class="screen">

<!-- HOME -->
<div class="page active" id="home">
 <div class="apps">
  <div class="app" onclick="openPage('puja')"><div class="icon">ğŸµ</div>Puja</div>
  <div class="app" onclick="openPage('card')"><div class="icon">ğŸª”</div>Card</div>
  <div class="app" onclick="openPage('pay')"><div class="icon">â‚¹</div>Pay</div>
  <div class="app" onclick="openPage('receiptSearch')"><div class="icon">ğŸ§¾</div>Receipt</div>
 </div>
</div>

<!-- PUJA -->
<div class="page" id="puja">
<p class="back" onclick="goHome()">â¬… Home</p>
<audio controls autoplay loop style="width:100%">
 <source src="puja-song.m4a">
</audio>
</div>

<!-- CARD -->
<div class="page" id="card">
<p class="back" onclick="goHome()">â¬… Home</p>
<img src="photo.jpg" style="width:100%;border-radius:18px">
</div>

<!-- PAY -->
<div class="page" id="pay">
<p class="back" onclick="goHome()">â¬… Home</p>

<input id="donor" placeholder="Enter Name">
<input id="amount" type="number" placeholder="Suggested Amount (250â€“5000)" oninput="showQR()">

<div id="qrBox" style="display:none;text-align:center">
 <p><b>ğŸ“· Scan & Pay</b></p>
 <p>Amount â‚¹<span id="qrAmount"></span></p>
 <img id="qrImg" style="width:100%;max-width:260px;border-radius:18px;
 box-shadow:0 10px 25px rgba(0,0,0,.3)">
 <div class="qrnote">
  Google Pay / PhonePe / Paytm<br>
  à¤•à¤¿à¤¸à¥€ à¤­à¥€ UPI App à¤¸à¥‡ QR scan à¤•à¤°à¥‡à¤‚
 </div>
</div>

<button onclick="confirmPayment()">Payment Done</button>
</div>

<!-- SUCCESS -->
<div class="page" id="success">
<h2>âœ… Receipt Generated</h2>
<div id="receiptBox" class="receipt"></div>
<button onclick="window.print()">ğŸ–¨ Print Receipt</button>
</div>

<!-- RECEIPT SEARCH -->
<div class="page" id="receiptSearch">
<p class="back" onclick="goHome()">â¬… Home</p>
<input id="searchName" placeholder="Enter Name">
<input id="searchAmt" placeholder="Enter Amount">
<button onclick="searchReceipt()">ğŸ” Search Receipt</button>
</div>

<!-- HISTORY -->
<div class="page" id="history">
<p class="back" onclick="goHome()">â¬… Home</p>
<div id="historyList"></div>
</div>

</div>

<!-- BOTTOM NAV -->
<div class="bottom">
<div onclick="goHome()">ğŸ <br>Home</div>
<div onclick="openPage('card')">ğŸª”<br>Invite</div>
<div onclick="openPage('history')">ğŸ“œ<br>History</div>
</div>

</div>

<script>
const SCRIPT_URL="https://script.google.com/macros/s/AKfycbwGDtbbeF4yyao_WKysSJxcwbtFF8D_s1VFA4kCEVLgtqyfByWW22F9TgHE2aqRJQTs/exec";
const UPI_ID="9471418396@ptyes";
const PAYEE_NAME="Saraswati Puja";

function openPage(id){
 document.querySelectorAll('.page').forEach(p=>p.classList.remove('active'));
 document.getElementById(id).classList.add('active');
 if(id==="history") loadHistory();
}
function goHome(){openPage('home')}

function showQR(){
 let a=+amount.value;
 if(a>=250 && a<=5000){
  qrBox.style.display="block";
  qrAmount.innerText=a;
  let upiData=`upi://pay?pa=${UPI_ID}&pn=${encodeURIComponent(PAYEE_NAME)}&am=${a}&cu=INR`;
  qrImg.src="https://api.qrserver.com/v1/create-qr-code/?size=300x300&data="+encodeURIComponent(upiData);
 }else qrBox.style.display="none";
}

function formatTime(time){
 return new Date(time).toLocaleString("en-IN",{
  timeZone:"Asia/Kolkata",
  day:"2-digit",month:"2-digit",year:"numeric",
  hour:"2-digit",minute:"2-digit",second:"2-digit",
  hour12:true
 });
}

function confirmPayment(){
 let n=donor.value.trim(),a=+amount.value;
 if(!n||a<250||a>5000){alert("Invalid details");return}
 let t=new Date().toISOString();
 fetch(SCRIPT_URL,{method:"POST",body:JSON.stringify({name:n,amount:a,time:t})});
}

function loadHistory(){
 historyList.innerHTML="Loading...";
 fetch(SCRIPT_URL).then(r=>r.json()).then(data=>{
  historyList.innerHTML="";
  data.reverse().forEach(r=>{
   let d=document.createElement("div");
   d.className="receipt";
   d.innerHTML=`${r.name} â€“ â‚¹${r.amount}<br>ğŸ•’ ${formatTime(r.time)}`;
   historyList.appendChild(d);
  });
 });
}

function searchReceipt(){
 let n=searchName.value.trim(),a=searchAmt.value.trim();
 if(!n||!a){alert("Enter name & amount");return}

 fetch(SCRIPT_URL).then(r=>r.json()).then(data=>{
  let r=data.find(x=>x.name===n && x.amount==a);
  if(r){
   receiptBox.innerHTML=`
    <div class="verifiedStamp">âœ” VERIFIED</div>
    <b>Name:</b> ${r.name}<br>
    <b>Amount:</b> â‚¹${r.amount}<br>
    ğŸ•’ ${formatTime(r.time)}
   `;
   openPage("success");
  }else alert("No record found");
 });
}
</script>

</body>
</html>

<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Moto G85 Saraswati Puja â€“ FINAL MERGED</title>
<style>
*{box-sizing:border-box;font-family:Segoe UI,sans-serif}
body{margin:0;background:#000;display:flex;justify-content:center}
.phone{width:390px;height:780px;background:linear-gradient(180deg,#f7d87c,#fff6d5);border-radius:40px;box-shadow:0 0 40px rgba(0,0,0,.7);overflow:hidden;position:relative}
header{text-align:center;padding:18px}
h1{margin:0;font-size:22px;color:#7b3f00}
.screen{height:640px;padding:10px}
.page{display:none;height:100%;overflow:auto}
.page.active{display:block}
.apps{display:grid;grid-template-columns:repeat(2,1fr);gap:20px;margin-top:30px}
.app{background:#fff;border-radius:22px;padding:18px;text-align:center;box-shadow:0 8px 20px rgba(0,0,0,.25);cursor:pointer}
.icon{font-size:30px}
input,button{width:100%;padding:12px;margin-top:10px;border-radius:12px;font-size:16px}
button{border:none;background:#ff5722;color:#fff}
.receipt{background:#fff;padding:15px;border-radius:12px;margin-top:15px}
.back{cursor:pointer;color:#7b3f00;font-weight:bold}
.bottom{position:absolute;bottom:0;left:0;right:0;height:60px;background:#fff;display:flex;justify-content:space-around;align-items:center}
.bottom div{cursor:pointer;font-size:12px;text-align:center}
</style>
</head>
<body>
<div class="phone">
<header><h1>ğŸ™ Saraswati Puja App ğŸ™</h1></header>
<div class="screen">

<!-- HOME -->
<div class="page active" id="home">
  <div class="apps">
    <div class="app" onclick="openPage('puja')"><div class="icon">ğŸµ</div>Puja</div>
    <div class="app" onclick="openPage('card')"><div class="icon">ğŸª”</div>Card</div>
    <div class="app" onclick="openPage('pay')"><div class="icon">â‚¹</div>Pay</div>
    <div class="app" onclick="openPage('history')"><div class="icon">ğŸ“œ</div>History</div>
  </div>
</div>

<!-- PUJA -->
<div class="page" id="puja">
  <div class="back" onclick="openPage('home')">â¬… Home</div>
  <audio controls autoplay loop style="width:100%">
    <source src="puja-song.m4a" type="audio/mp4">
  </audio>
</div>

<!-- CARD -->
<div class="page" id="card">
  <div class="back" onclick="openPage('home')">â¬… Home</div>
  <img src="photo.jpg" style="width:100%;border-radius:18px">
</div>

<!-- PAY -->
<div class="page" id="pay">
  <div class="back" onclick="openPage('home')">â¬… Home</div>
  <input id="name" placeholder="Enter Name">
  <input id="amount" type="number" placeholder="Amount (250â€“5000)">
  <button onclick="generatePayment()">Proceed to Pay</button>
</div>

<!-- SUCCESS -->
<div class="page" id="success">
  <div class="receipt" id="receiptBox"></div>
  <button onclick="confirmPayment()">âœ” I Have Paid</button>
</div>

<!-- HISTORY -->
<div class="page" id="history">
  <div class="back" onclick="openPage('home')">â¬… Home</div>
  <div id="historyList"></div>
</div>

</div>
<div class="bottom">
  <div onclick="openPage('home')">ğŸ  Home</div>
  <div onclick="openPage('pay')">â‚¹ Pay</div>
  <div onclick="openPage('history')">ğŸ“œ History</div>
</div>
</div>

<script>
// ===== CONFIG =====
const SERVER_URL = "https://script.google.com/macros/s/AKfycbwGDtbbeF4yyao_WKysSJxcwbtFF8D_s1VFA4kCEVLgtqyfByWW22F9TgHE2aqRJQTs/exec";
const UPI_ID = "9471418396@ptyes";

// ===== NAV =====
function openPage(id){
  document.querySelectorAll('.page').forEach(p=>p.classList.remove('active'));
  document.getElementById(id).classList.add('active');
  if(id==='history') loadHistory();
}

// ===== PAYMENT =====
function generatePayment(){
  const n = document.getElementById('name').value.trim();
  const a = Number(document.getElementById('amount').value);
  if(!n){alert('Name required');return;}
  if(isNaN(a)||a<250||a>5000){alert('Amount 250â€“5000 ke beech dalo');return;}
  const upi = `upi://pay?pa=${UPI_ID}&pn=Saraswati%20Puja&am=${a}&cu=INR`;
  document.getElementById('receiptBox').innerHTML = `
    <b>Name:</b> ${n}<br>
    <b>Amount:</b> â‚¹${a}<br><br>
    <a href="${upi}" style="display:block;background:green;color:white;padding:14px;text-align:center;border-radius:10px;text-decoration:none">ğŸ‘‰ CLICK TO PAY (GPay / PhonePe)</a>
    <p style="font-size:13px">Payment ke baad I Have Paid dabaye</p>`;
  openPage('success');
}

function confirmPayment(){
  const n = document.getElementById('name').value.trim();
  const a = Number(document.getElementById('amount').value);
  fetch(SERVER_URL,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({name:n,amount:a})})
    .then(()=>alert('Payment record saved'))
    .catch(()=>alert('Server error'));
}

// ===== HISTORY =====
function loadHistory(){
  fetch(SERVER_URL)
    .then(r=>r.json())
    .then(d=>{
      const box=document.getElementById('historyList');
      box.innerHTML='';
      d.forEach(r=>{
        const div=document.createElement('div');
        div.className='receipt';
        div.innerHTML=`${r.name} â€“ â‚¹${r.amount}<br>${r.time||''}`;
        box.appendChild(div);
      });
    });
}
</script>
</body>
</html>

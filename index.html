<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Moto G85 Saraswati Puja App</title>

<style>
*{box-sizing:border-box;font-family:Segoe UI,sans-serif}
body{margin:0;background:#000;display:flex;justify-content:center}

.phone{
  width:390px;height:780px;
  background:linear-gradient(180deg,#f7d87c,#fff6d5);
  border-radius:40px;
  box-shadow:0 0 40px rgba(0,0,0,.7);
  overflow:hidden;position:relative;
}
.curve{
  position:absolute;inset:0;border-radius:40px;
  box-shadow:inset 12px 0 25px rgba(255,255,255,.4),
             inset -12px 0 25px rgba(0,0,0,.2);
  pointer-events:none;
}

header{text-align:center;padding:18px 10px 10px}
h1{
  margin:0;font-size:24px;color:#7b3f00;
  animation:glow 2s infinite alternate;
}
@keyframes glow{from{text-shadow:0 0 5px #fff;}to{text-shadow:0 0 18px gold;}}
@keyframes spin{from{transform:rotate(0)}to{transform:rotate(360deg)}}
@keyframes bounce{0%,100%{transform:translateY(0)}50%{transform:translateY(-6px)}}
@keyframes fadeIn{from{opacity:0;transform:scale(.95)}to{opacity:1;transform:scale(1)}}

.screen{height:640px;padding:10px}
.page{display:none;height:100%;overflow:auto}
.page.active{display:block}

.apps{display:grid;grid-template-columns:repeat(2,1fr);gap:22px;margin-top:30px}
.app{background:linear-gradient(145deg,#fff,#e9e9e9);border-radius:26px;padding:18px 10px;text-align:center;box-shadow:0 12px 25px rgba(0,0,0,.25);transition:.3s}
.app:hover{transform:translateY(-6px)}
.icon{width:60px;height:60px;margin:auto;border-radius:50%;background:linear-gradient(145deg,#ff9800,#ff5722);display:flex;align-items:center;justify-content:center;color:#fff;font-size:28px}
.app span{display:block;margin-top:10px;font-weight:600}
.back{font-weight:bold;color:#7b3f00;cursor:pointer}

input{width:100%;padding:12px;margin:10px 0;border-radius:12px;border:1px solid #ccc;font-size:16px}
button{width:100%;padding:14px;border:none;border-radius:14px;background:linear-gradient(145deg,#ff9800,#ff5722);color:#fff;font-size:18px;animation:bounce 1.4s infinite}
.receipt{background:#fff;padding:15px;border-radius:15px;margin-top:15px}

.bottom{position:absolute;bottom:0;left:0;right:0;height:60px;background:#fff;display:flex;justify-content:space-around;align-items:center}
.bottom div{text-align:center;font-size:12px;cursor:pointer}
.bottom i{font-size:22px;display:block}
</style>
</head>

<body>
<div class="phone">
<div class="curve"></div>

<header>
<h1>üôè Jay Maa Saraswati Puja üôè</h1>
</header>

<div class="screen">

<div class="page active" id="home">
  <div class="apps">
    <div class="app" onclick="openPage('puja')"><div class="icon">üéµ</div><span>Puja</span></div>
    <div class="app" onclick="openPage('card')"><div class="icon">ü™î</div><span>Card</span></div>
    <div class="app" onclick="openPage('pay')"><div class="icon">‚Çπ</div><span>Pay</span></div>
    <div class="app" onclick="openPage('receiptSearch')"><div class="icon">üßæ</div><span>Receipt</span></div>
  </div>
</div>

<div class="page" id="puja">
  <p class="back" onclick="goHome()">‚¨Ö Home</p>
  <h2 style="text-align:center;animation:glow 2s infinite">üé∂ Saraswati Vandana üé∂</h2>
  <audio controls autoplay loop style="width:100%">
    <source src="puja-song.m4a" type="audio/mp4">
  </audio>
</div>

<div class="page" id="card">
  <p class="back" onclick="goHome()">‚¨Ö Home</p>
  <img src="photo.jpg" style="width:100%;border-radius:18px">
</div>

<div class="page" id="pay">
  <p class="back" onclick="goHome()">‚¨Ö Home</p>
  <input id="donor" placeholder="Enter Name">
  <input id="amount" type="number" placeholder="Amount (250‚Äì5000)">
  <button onclick="payNow()">Pay Now</button>
    <button onclick="confirmPayment()" style="margin-top:10px;background:linear-gradient(145deg,#4caf50,#2e7d32)">‚úî I Have Paid</button>
</div>

<div class="page" id="success">
  <h2>‚úÖ Payment Successful</h2>
  <div class="receipt" id="receiptBox"></div>
  <button onclick="window.print()">Print Receipt</button>
</div>

<div class="page" id="receiptSearch">
  <p class="back" onclick="goHome()">‚¨Ö Home</p>
  <input id="searchName" placeholder="Name">
  <input id="searchAmt" placeholder="Amount">
  <button onclick="searchReceipt()">Search & Print</button>
</div>

<div class="page" id="history">
  <p class="back" onclick="goHome()">‚¨Ö Home</p>
  <div id="historyList"></div>
</div>

</div>

<div class="bottom">
  <div onclick="goHome()"><i>üè†</i>Home</div>
  <div onclick="openPage('card')"><i>ü™î</i>Invitation</div>
  <div onclick="openPage('history')"><i>üìú</i>History</div>
</div>
</div>

<script>
// üî¥ DEBUG ALERT ‚Äì agar ye alert nahi aaya to JS load hi nahi ho raha
alert('JS LOADED OK');

const SERVER_URL = "https://script.google.com/macros/s/AKfycbwGDtbbeF4yyao_WKysSJxcwbtFF8D_s1VFA4kCEVLgtqyfByWW22F9TgHE2aqRJQTs/exec";

function openPage(id){
  document.querySelectorAll('.page').forEach(p=>p.classList.remove('active'));
  const el = document.getElementById(id);
  if(!el){ alert('Page not found: '+id); return; }
  el.classList.add('active');
}

function goHome(){ openPage('home'); }

function payNow(){
  const amtEl = document.getElementById('amount');
  if(!amtEl){ alert('Amount input missing'); return; }

  const a = Number(amtEl.value);

  // ‚úÖ STRONG VALIDATION (NO NEGATIVE / EMPTY / ZERO)
  if(isNaN(a) || a <= 0){
    alert('Kripya sahi payment amount dalo');
    return;
  }
  if(a < 250 || a > 5000){
    alert('Amount 250 se 5000 ke beech hona chahiye');
    return;
  }

  const upi = `upi://pay?pa=9471418396@ptyes&pn=Saraswati%20Puja&am=${a}&cu=INR`;

  document.getElementById('receiptBox').innerHTML = `
    <h3>UPI Payment</h3>
    <p>Amount: <b>‚Çπ${a}</b></p>
    <a href="${upi}" style="display:block;padding:15px;background:green;color:white;text-align:center;border-radius:12px;text-decoration:none;font-size:18px">CLICK HERE TO PAY</a>
    <p style="margin-top:10px">Payment ke baad <b>I Have Paid</b> dabao</p>
  `;

  openPage('success');
}

function confirmPayment(){
  const n = document.getElementById('donor').value;
  const a = document.getElementById('amount').value;
  if(!n || !a){ alert('Name aur amount zaroori hai'); return; }

  fetch(SERVER_URL,{
    method:'POST',
    headers:{'Content-Type':'application/json'},
    body: JSON.stringify({name:n, amount:a})
  }).catch(()=>{});

  alert('Payment confirmed (manual)');
}
</script>
</body>
</html>

<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Moto G85 Saraswati Puja App</title>

<style>
*{box-sizing:border-box;font-family:Segoe UI,sans-serif}
body{margin:0;background:#000;display:flex;justify-content:center}

.phone{
  width:390px;height:780px;
  background:linear-gradient(180deg,#f7d87c,#fff6d5);
  border-radius:40px;
  box-shadow:0 0 40px rgba(0,0,0,.7);
  overflow:hidden;position:relative;
}
.curve{
  position:absolute;inset:0;border-radius:40px;
  box-shadow:inset 12px 0 25px rgba(255,255,255,.4),
             inset -12px 0 25px rgba(0,0,0,.2);
  pointer-events:none;
}

header{text-align:center;padding:18px 10px 10px}
h1{
  margin:0;font-size:24px;color:#7b3f00;
  animation:glow 2s infinite alternate;
}
@keyframes glow{from{text-shadow:0 0 5px #fff;}to{text-shadow:0 0 18px gold;}}
@keyframes spin{from{transform:rotate(0)}to{transform:rotate(360deg)}}
@keyframes bounce{0%,100%{transform:translateY(0)}50%{transform:translateY(-6px)}}
@keyframes fadeIn{from{opacity:0;transform:scale(.95)}to{opacity:1;transform:scale(1)}}

.screen{height:640px;padding:10px}
.page{display:none;height:100%;overflow:auto}
.page.active{display:block}

.apps{display:grid;grid-template-columns:repeat(2,1fr);gap:22px;margin-top:30px}
.app{background:linear-gradient(145deg,#fff,#e9e9e9);border-radius:26px;padding:18px 10px;text-align:center;box-shadow:0 12px 25px rgba(0,0,0,.25);transition:.3s}
.app:hover{transform:translateY(-6px)}
.icon{width:60px;height:60px;margin:auto;border-radius:50%;background:linear-gradient(145deg,#ff9800,#ff5722);display:flex;align-items:center;justify-content:center;color:#fff;font-size:28px}
.app span{display:block;margin-top:10px;font-weight:600}
.back{font-weight:bold;color:#7b3f00;cursor:pointer}

input{width:100%;padding:12px;margin:10px 0;border-radius:12px;border:1px solid #ccc;font-size:16px}
button{width:100%;padding:14px;border:none;border-radius:14px;background:linear-gradient(145deg,#ff9800,#ff5722);color:#fff;font-size:18px;animation:bounce 1.4s infinite}
.receipt{background:#fff;padding:15px;border-radius:15px;margin-top:15px}

.bottom{position:absolute;bottom:0;left:0;right:0;height:60px;background:#fff;display:flex;justify-content:space-around;align-items:center}
.bottom div{text-align:center;font-size:12px;cursor:pointer}
.bottom i{font-size:22px;display:block}
</style>
</head>

<body>
<div class="phone">
<div class="curve"></div>

<header>
<h1>üôè Jay Maa Saraswati Puja üôè</h1>
</header>

<div class="screen">

<div class="page active" id="home">
  <div class="apps">
    <div class="app" onclick="openPage('puja')"><div class="icon">üéµ</div><span>Puja</span></div>
    <div class="app" onclick="openPage('card')"><div class="icon">ü™î</div><span>Card</span></div>
    <div class="app" onclick="openPage('pay')"><div class="icon">‚Çπ</div><span>Pay</span></div>
    <div class="app" onclick="openPage('receiptSearch')"><div class="icon">üßæ</div><span>Receipt</span></div>
  </div>
</div>

<div class="page" id="puja">
  <p class="back" onclick="goHome()">‚¨Ö Home</p>
  <h2 style="text-align:center;animation:glow 2s infinite">üé∂ Saraswati Vandana üé∂</h2>
  <audio controls autoplay loop style="width:100%">
    <source src="puja-song.m4a" type="audio/mp4">
  </audio>
</div>

<div class="page" id="card">
  <p class="back" onclick="goHome()">‚¨Ö Home</p>
  <img src="photo.jpg" style="width:100%;border-radius:18px">
</div>

<div class="page" id="pay">
  <p class="back" onclick="goHome()">‚¨Ö Home</p>
  <input id="donor" placeholder="Enter Name">
  <input id="amount" type="number" placeholder="Amount (250‚Äì5000)">
  <button onclick="payNow()">Pay Now</button>
    <button onclick="confirmPayment()" style="margin-top:10px;background:linear-gradient(145deg,#4caf50,#2e7d32)">‚úî I Have Paid</button>
</div>

<div class="page" id="success">
  <h2>‚úÖ Payment Successful</h2>
  <div class="receipt" id="receiptBox"></div>
  <button onclick="window.print()">Print Receipt</button>
</div>

<div class="page" id="receiptSearch">
  <p class="back" onclick="goHome()">‚¨Ö Home</p>
  <input id="searchName" placeholder="Name">
  <input id="searchAmt" placeholder="Amount">
  <button onclick="searchReceipt()">Search & Print</button>
</div>

<div class="page" id="history">
  <p class="back" onclick="goHome()">‚¨Ö Home</p>
  <div id="historyList"></div>
</div>

</div>

<div class="bottom">
  <div onclick="goHome()"><i>üè†</i>Home</div>
  <div onclick="openPage('card')"><i>ü™î</i>Invitation</div>
  <div onclick="openPage('history')"><i>üìú</i>History</div>
</div>
</div>

<script>
const SERVER_URL = "https://script.google.com/macros/s/AKfycbwGDtbbeF4yyao_WKysSJxcwbtFF8D_s1VFA4kCEVLgtqyfByWW22F9TgHE2aqRJQTs/exec";

function openPage(id){
  document.querySelectorAll('.page').forEach(p=>p.classList.remove('active'));
  const el = document.getElementById(id);
  if(el) el.classList.add('active');
  if(id==='history') loadHistory();
}
function goHome(){ openPage('home'); }

function payNow(){
  const a = Number(document.getElementById('amount').value);
  if(a < 250 || a > 5000){
    alert('Amount 250 se 5000 ke beech hona chahiye');
    return;
  }

  // ‚úÖ MOST RELIABLE ANDROID UPI METHOD (INTENT)
  const upiIntent = `intent://pay?pa=9471418396@ptyes&pn=Saraswati%20Puja&tn=Donation&am=${a}&cu=INR#Intent;scheme=upi;package=com.google.android.apps.nbu.paisa.user;end;`;

  window.location.href = upiIntent;
}
  const upi = `upi://pay?pa=9471418396@ptyes&pn=Saraswati%20Puja&tn=Donation&am=${a}&cu=INR`;
  window.location.href = upi;
}

function confirmPayment(){
  const n = document.getElementById('donor').value;
  const a = Number(document.getElementById('amount').value);
  if(!n || !a){ alert('Name aur Amount bharna zaroori hai'); return; }

  fetch(SERVER_URL,{
    method:'POST',
    headers:{'Content-Type':'application/json'},
    body: JSON.stringify({name:n, amount:a})
  }).catch(()=>{});

  document.getElementById('receiptBox').innerHTML = `
    <b>Organised by Mukesh Apartment</b><br>
    Name: ${n}<br>
    Amount: ‚Çπ${a}<br>
    Status: <b style="color:green">Payment Confirmed</b><br>
    ${new Date().toLocaleString()}<br>
    <b style="animation:glow 2s infinite">Thanks for Donation</b>
  `;
  openPage('success');
}

function loadHistory(){
  fetch(SERVER_URL)
    .then(r=>r.json())
    .then(d=>{
      const list = document.getElementById('historyList');
      list.innerHTML='';
      d.forEach(r=>{
        const div=document.createElement('div');
        div.className='receipt';
        div.innerHTML = `${r.name} ‚Äì ‚Çπ${r.amount}<br>${r.date || ''} ${r.time || ''}`;
        list.appendChild(div);
      });
    })
    .catch(()=>{
      document.getElementById('historyList').innerHTML = 'No data';
    });
}

function searchReceipt(){
  const n = document.getElementById('searchName').value;
  const a = document.getElementById('searchAmt').value;
  fetch(`${SERVER_URL}?name=${encodeURIComponent(n)}&amount=${encodeURIComponent(a)}`)
    .then(r=>r.json())
    .then(r=>{
      if(!r){ alert('No record found'); return; }
      document.getElementById('receiptBox').innerHTML = `
        <b>Organised by Mukesh Apartment</b><br>
        Name: ${r.name}<br>
        Amount: ‚Çπ${r.amount}<br>
        ${r.date || ''} ${r.time || ''}
      `;
      openPage('success');
    });
}
</script>
</body>
</html>
